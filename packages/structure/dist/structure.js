!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("@hapi/joi")):"function"==typeof define&&define.amd?define("Structure",["lodash","joi"],e):"object"==typeof exports?exports.Structure=e(require("lodash"),require("@hapi/joi")):t.Structure=e(t._,t.joi)}(window,(function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports={SCHEMA:Symbol("schema"),ATTRIBUTES:Symbol("attributes"),DEFAULT_ACCESSOR:Symbol("defaultAccessor")}},function(t,e,n){function r(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=n(1),c=n(0),f=c.isPlainObject,l=c.isFunction;function s(t){return f(t)?a.ref(t.attr):t}function p(t,e){var n=e.initial;return t.options.nullable&&(n=n.allow(null)),t.options.required&&(n=n.required()),n}e.mapToJoi=function(t,e){var n=e.initial,r=e.mappings.reduce((function(e,n){var r=i(n,3),o=r[0],u=r[1],a=r[2],c=t.options[o];return void 0===c?e:function(t,e){return t&&(!l(t)||t(e))}(a,c)?e[u](c):e[u]()}),n);return r=p(t,{initial:r})},e.mapToJoiWithReference=function(t,e){var n=e.initial;return e.mappings.reduce((function(e,n){var r=i(n,2),o=r[0],u=r[1],a=t.options[o];return void 0===a?e:(a=s(a),e[u](a))}),n)},e.equalOption=function(t,e){var n=e.initial,i=t.options.equal;return void 0===i?n:(Array.isArray(i)||(i=[i]),i=i.map(s),n.equal.apply(n,r(i)))},e.requiredOption=p},function(t,e){e.classAsSecondParam=function(t){return new Error("You passed the structure class as the second parameter of attributes(). The expected usage is `attributes(schema)(".concat(t.name||"StructureClass",")`."))},e.nonObjectAttributes=function(){return new TypeError("#attributes can't be set to a non-object.")},e.arrayOrIterable=function(){return new TypeError("Value must be iterable or array-like.")},e.missingDynamicType=function(t){return new Error("Missing dynamic type for attribute: ".concat(t,"."))},e.invalidType=function(t){return new TypeError("Attribute type must be a constructor or the name of a dynamic type: ".concat(t,"."))},e.invalidAttributes=function(t,e){return new e(t)},e.inexistentAttribute=function(t){return new Error("".concat(t," is not an attribute of this structure"))}},function(t,e,n){e.for=n(22),e.forAttribute=n(23)},function(t,e,n){var r=n(1),i=n(2).SCHEMA,o=n(3).requiredOption;e.forType=function(t){if(t.hasDynamicType)return function(t){var e=r.link("#".concat(t.options.type));return e=o(t,{initial:e})}(t);var e=function(t){var e=r.object();if(t){var n=t.attributeDefinitions.reduce((function(t,e){return Object.assign({},t,(n={},r=e.name,i=e.validation,r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n));var n,r,i}),{});e=e.keys(n)}return e}(t.resolveType()[i]);return e=o(t,{initial:e})};e.resolveDynamicLinks=function t(e){var n=e.schema,r=e.joiValidation;return n.attributeDefinitions.reduce((function(e,n){if(!n.hasDynamicType)return e;var r=n.resolveType()[i];if(!r||e._ids._get(r.identifier))return e;var o=r.validation,u=e.shared(o.joiValidation);return t({schema:r,joiValidation:u})}),r)}},function(t,e,n){var r=n(2).ATTRIBUTES;e.setInInstance=function(t,e){Object.defineProperty(t,r,{configurable:!0,value:e})}},function(t,e,n){t.exports=n(9)},function(t,e,n){e.attributes=n(10)},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(11),o=n(31),u=n(4);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==r(e))throw u.classAsSecondParam(e);return function(n){var r=i.for({wrappedClass:n,attributeDefinitions:t,options:e}),u=new Proxy(n,{construct:function(t,e,n){var i=Reflect.construct(t,e,n),o=Object.assign({},e[0]);return r.initializeInstance(i,{attributes:o})}});return o.addTo(r,u),u}}},function(t,e,n){function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,u=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw u}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var a=n(12),c=n(29),f=n(5),l=n(30),s=n(2).SCHEMA,p=function(){function t(e){var n=e.attributeDefinitions,r=e.wrappedClass,i=e.options;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=b(i),this.attributeDefinitions=a.for(n,{schema:this}),this.wrappedClass=r,this.identifier=i.identifier||r.name,this.initialization=c.for(this),this.validation=f.for(this),this.serialize=l.serialize}return u(t,null,[{key:"for",value:function(t){var e=t.attributeDefinitions,n=t.wrappedClass,r=t.options,i=n[s];return i?this.extend(i,{attributeDefinitions:e,wrappedClass:n,options:r}):new this({attributeDefinitions:e,wrappedClass:n,options:r})}},{key:"extend",value:function(t,e){var n=e.attributeDefinitions,r=e.wrappedClass,i=e.options,o=t.attributeDefinitions.byKey();return new this({attributeDefinitions:n=Object.assign({},o,n),wrappedClass:r,options:i=Object.assign({},t.options,i,{dynamics:Object.assign({},t.dynamics,i.dynamics)})})}}]),u(t,[{key:"initializeInstance",value:function(t,e){var n=e.attributes;return this.initialization.initialize(t,{attributes:n})}},{key:"hasDynamicTypeFor",value:function(t){return Boolean(this.options.dynamics[t])}},{key:"dynamicTypeFor",value:function(t){return this.options.dynamics[t]()}},{key:"validateAttributes",value:function(t){return t[s]&&(t=t.toJSON()),this.validation.validate(t)}},{key:"validateInstance",value:function(t){var e=t.toJSON();return this.validation.validate(e)}},{key:"coerce",value:function(t){var e,n=Object.create(null),i=r(this.attributeDefinitions);try{for(i.s();!(e=i.n()).done;){var o=e.value,u=o.name,a=t[u];n[u]=o.coerce(a)}}catch(t){i.e(t)}finally{i.f()}return n}}]),t}(),y={coercion:!0},b=function(t){return Object.assign({},y,t)};t.exports=p},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,b(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),y(r,t)})(t)}function s(t,e,n){return(s=p()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&y(i,n.prototype),i}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=n(13),m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(u,t);var e,n,r=(e=u,n=p(),function(){var t,r=b(e);if(n){var i=b(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return f(this,t)});function u(t,e){var n,a=e.schema;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t=t.map((function(t){var e=t.name,n=t.options;return v.for(e,n,a)})).sort(v.compare),n=r.call.apply(r,[this].concat(i(t)));var c,f=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=o(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,u=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw u}}}}(t);try{for(f.s();!(c=f.n()).done;){var l=c.value;n[l.name]=l}}catch(t){f.e(t)}finally{f.f()}return n}return c(u,null,[{key:"for",value:function(t,e){var n=e.schema;return new this(t=Object.keys(t).map((function(e){return{name:e,options:t[e]}})),{schema:n})}}]),c(u,[{key:"byKey",value:function(){var t=this;return this.reduce((function(e,n){return Object.assign({},e,(r={},i=n.name,o=t[n.name],i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r));var r,i,o}),{})}}]),u}(l(Array));t.exports=m},function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var o=n(0),u=o.isFunction,a=o.isString,c=o.isUndefined,f=n(14),l=n(5),s=n(4),p=n(2).SCHEMA,y=function(){function t(e){var n=e.name,r=e.options,i=e.schema;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__isAttributeDefinition=!0,this.name=n,r=this.options=v(r,i),this.hasDefault="default"in r,this.isDynamicDefault=u(r.default),this.hasDynamicType=g(r),this.schema=i,r.itemType&&(this.isArrayType=!0,this.itemTypeDefinition=t.for("item",r.itemType,i)),this.coercion=f.for(this),this.validation=l.forAttribute(this)}return i(t,null,[{key:"for",value:function(t,e,n){return e.__isAttributeDefinition?new this({name:t,options:e.options,schema:n}):(e=b(e),this.assertValidType(t,e),this.assertDynamicExists(t,e,n),new this({name:t,options:e,schema:n}))}},{key:"compare",value:function(t,e){return t.isDynamicDefault===e.isDynamicDefault?0:t.isDynamicDefault?1:-1}},{key:"assertDynamicExists",value:function(t,e,n){if(g(e)&&!n.hasDynamicTypeFor(e.type))throw s.missingDynamicType(t)}},{key:"assertValidType",value:function(t,e){if(!g(e)&&!d(e))throw s.invalidType(t)}}]),i(t,[{key:"resolveType",value:function(){return this.hasDynamicType?this.schema.dynamicTypeFor(this.options.type):this.options.type}},{key:"coerce",value:function(t){return this.coercion.coerce(t)}},{key:"shouldSerialize",value:function(t){return this.isValuePresent(t)||this.isValueNullable(t)}},{key:"isValuePresent",value:function(t){return null!=t}},{key:"isValueNullable",value:function(t){return void 0!==t&&this.options.nullable}},{key:"initialize",value:function(t,e){return this.shouldInitializeToDefault(e)?this.defaultValueFor(t):e}},{key:"defaultValueFor",value:function(t){return this.isDynamicDefault?this.options.default(t):this.options.default}},{key:"shouldInitializeToDefault",value:function(t){var e=void 0===t,n=!this.options.nullable&&null===t;return this.hasDefault&&(e||n)}},{key:"isNestedSchema",get:function(){return Boolean(this.resolveType()[p])}},{key:"itemsAreStructures",get:function(){return this.isArrayType&&this.itemTypeDefinition.isNestedSchema}}]),t}(),b=function(t){return h(t)?{type:t}:t},v=function(t,e){return Object.assign({},t,{coercion:m(t.coercion,e.options.coercion)})},m=function(t,e){return c(t)?e:t},h=function(t){return u(t)||a(t)},d=function(t){return u(t.type)},g=function(t){return a(t.type)};t.exports=y},function(t,e,n){var r=n(15),i=n(16),o=n(17),u=[n(18),n(19),n(20),n(21)];e.for=function(t){if(!t.options.coercion)return o.disabled;var e=function(t){if(t.isArrayType)return r;var e=u.find((function(e){return e.type===t.options.type}));if(e)return e;return i}(t);return o.create(e,t)}},function(t,e,n){function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=n(4);t.exports={isCoerced:function(){return!1},nullValue:function(){throw o.arrayOrIterable()},coerce:function(t,e){!function(t){if(!function(t){return void 0!==t&&(null!=t.length||t[Symbol.iterator])}(t))throw o.arrayOrIterable()}(t);var n=function(t){if(!Array.isArray(t)&&t[Symbol.iterator])return Array.apply(void 0,r(t));return t}(t);return function(t,e,n){for(var r=0;r<e.length;r++)t.push(n.itemTypeDefinition.coerce(e[r]));return t}(function(t){return new(t.resolveType())}(e),n,e)}}},function(t,e){t.exports={isCoerced:function(t,e){return t instanceof e.resolveType()},coerce:function(t,e){return new(e.resolveType())(t)}}},function(t,e,n){var r=n(0).isFunction;e.create=function(t,e){return{coerce:function(n){if(void 0!==n)return null===n?i(t,e):t.isCoerced(n,e)?n:t.coerce(n,e)}}},e.disabled={coerce:function(t){return t}};var i=function(t,e){return o(e)?u(t):null},o=function(t){return!t.options.required&&!t.options.nullable},u=function(t){return r(t.nullValue)?t.nullValue():t.nullValue}},function(t,e,n){var r=n(0).isString;t.exports={type:String,isCoerced:r,nullValue:"",coerce:function(t){return this.type(t)}}},function(t,e,n){var r=n(0).isNumber;t.exports={type:Number,isCoerced:r,nullValue:0,coerce:function(t){return this.type(t)}}},function(t,e,n){var r=n(0).isBoolean;t.exports={type:Boolean,isCoerced:r,nullValue:!1,coerce:function(t){return this.type(t)}}},function(t,e,n){var r=n(0).isDate;t.exports={type:Date,isCoerced:r,nullValue:function(){return new Date(null)},coerce:function(t){return new this.type(t)}}},function(t,e,n){var r=n(1),i=n(6),o={abortEarly:!1,convert:!1,allowUnknown:!1};t.exports=function(t){var e=t.attributeDefinitions.reduce((function(t,e){return Object.assign({},t,(n={},r=e.name,i=e.validation,r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n));var n,r,i}),{}),n=r.object().keys(e).id(t.identifier);return{joiValidation:n,validate:function(e){var r=i.resolveDynamicLinks({schema:t,joiValidation:n}).validate(e,o).error;return r?{valid:!1,errors:r.details.map(u)}:{valid:!0}}}};var u=function(t){return{message:t.message,path:t.path}}},function(t,e,n){var r=[n(24),n(25),n(26),n(27)],i=n(6),o=n(28);t.exports=function(t){if(t.isArrayType)return o(t);var e=r.find((function(e){return e.type===t.options.type}));return e?e.createJoiSchema(t):i.forType(t)}},function(t,e,n){var r=n(1),i=n(0).isPlainObject,o=n(3),u=o.mapToJoi,a=o.equalOption;t.exports={type:String,joiMappings:[["minLength","min",!0],["maxLength","max",!0],["exactLength","length",!0],["regex","regex",!0],["alphanumeric","alphanum"],["lowerCase","lowercase"],["upperCase","uppercase"],["email","email"],["guid","guid",i]],createJoiSchema:function(t){var e=r.string();return t.options.empty&&(e=e.allow("")),e=a(t,{initial:e}),u(t,{initial:e,mappings:this.joiMappings})}}},function(t,e,n){var r=n(1),i=n(3),o=i.mapToJoi,u=i.mapToJoiWithReference,a=i.equalOption;t.exports={type:Number,joiMappings:[["integer","integer"],["precision","precision",!0],["multiple","multiple",!0],["positive","positive",!0],["negative","negative",!0]],valueOrRefOptions:[["min","min"],["greater","greater"],["max","max"],["less","less"]],createJoiSchema:function(t){var e=u(t,{initial:r.number(),mappings:this.valueOrRefOptions});return e=a(t,{initial:e}),o(t,{initial:e,mappings:this.joiMappings})}}},function(t,e,n){var r=n(1),i=n(3),o=i.mapToJoi,u=i.equalOption;t.exports={type:Boolean,joiMappings:[],createJoiSchema:function(t){var e=u(t,{initial:r.boolean()});return o(t,{initial:e,mappings:this.joiMappings})}}},function(t,e,n){var r=n(1),i=n(3),o=i.mapToJoi,u=i.mapToJoiWithReference,a=i.equalOption;t.exports={type:Date,joiMappings:[],valueOrRefOptions:[["min","min"],["max","max"]],createJoiSchema:function(t){var e=u(t,{initial:r.date(),mappings:this.valueOrRefOptions});return e=a(t,{initial:e}),o(t,{initial:e,mappings:this.joiMappings})}}},function(t,e,n){var r=n(1),i=n(3).mapToJoi,o=[["minLength","min",!0],["maxLength","max",!0],["exactLength","length",!0],["unique","unique"]];t.exports=function(t){var e=r.array().items(t.itemTypeDefinition.validation),n=t.options.sparse,u=void 0===n||n;return e=e.sparse(u),e=i(t,{initial:e,mappings:o})}},function(t,e,n){function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,u=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw u}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=n(7);e.for=function(t){return{initialize:function(e,n){var i=n.attributes;o.setInInstance(e,Object.create(null));var u,a=r(t.attributeDefinitions);try{for(a.s();!(u=a.n()).done;){var c=u.value,f=i[c.name];e[c.name]=c.initialize(e,f)}}catch(t){a.e(t)}finally{a.f()}return e}}}},function(t,e,n){function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,u=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw u}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=n(2).SCHEMA;function u(t){return null==t?t:function(t){var e,n=t[o],i=Object.create(null),u=r(n.attributeDefinitions);try{for(u.s();!(e=u.n()).done;){var c=e.value,f=t[c.name];c.shouldSerialize(f)&&(i[c.name]=a(f,c))}}catch(t){u.e(t)}finally{u.f()}return i}(t)}function a(t,e){return e.itemsAreStructures?t.map(u):e.isNestedSchema?u(t):t}e.serialize=u},function(t,e,n){var r=n(0).isObject,i=n(2),o=i.SCHEMA,u=i.ATTRIBUTES,a=i.DEFAULT_ACCESSOR,c=n(4),f=n(32),l=n(34),s=n(7),p=Object.defineProperty,y=Object.defineProperties;e.addTo=function(t,e){var n,i;function b(t){return!t||t[a]}p(e,o,{value:t}),p(e.prototype,o,{value:t}),n=f.for(t,e),p(e,"buildStrict",{value:n.buildStrict}),p(e.prototype,"attributes",{get:function(){return this[u]},set:function(e){if(!r(e))throw c.nonObjectAttributes();var n=t.coerce(e);s.setInInstance(this,n)}}),y(e.prototype,{get:{value:function(t){return this.attributes[t]}},set:{value:function(e,n){var r=t.attributeDefinitions[e];if(!r)throw c.inexistentAttribute(e);var i=r.coerce(n);this.attributes[e]=i}}}),t.attributeDefinitions.forEach((function(t){p(e.prototype,t.name,function(t){var n=t.name,r=function(t){for(var n=e.prototype;n!==Object.prototype;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return Object.assign({},r,{enumerable:!1,configurable:!0});n=n.__proto__}return{}}(n);return b(r.get)&&(r.get=function(t){function e(){return this.get(t)}return e[a]=!0,e}(n)),b(r.set)&&(r.set=function(t){function e(e){this.set(t,e)}return e[a]=!0,e}(n)),r}(t))})),p(e,"validate",{value:function(e){return t.validateAttributes(e)}}),p(e.prototype,"validate",{value:function(){return t.validateInstance(this)}}),p(e.prototype,"toJSON",{value:function(){return t.serialize(this)}}),i=l.for(e),p(e.prototype,"clone",{value:i.clone})}},function(t,e,n){function r(t,e,n){return(r=i()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(4),a=n(33);e.for=function(t,e){var n=t.options.strictValidationErrorClass||a;return{buildStrict:function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var a=r(e,i),c=a.validate(),f=c.valid,l=c.errors;if(!f)throw u.invalidAttributes(l,n);return a}}}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){var e="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return o(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,t)})(t)}function o(t,e,n){return(o=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(o,t);var e,n,i=(e=o,n=u(),function(){var t,i=c(e);if(n){var o=c(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return r(this,t)});function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,"Invalid Attributes")).details=t,e}return o}(i(Error));t.exports=f},function(t,e){e.for=function(t){return{clone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.strict,i=Object.assign({},this.attributes,e);return r?t.buildStrict(i):new t(i)}}}}])}));